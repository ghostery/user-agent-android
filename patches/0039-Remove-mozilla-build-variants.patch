From 09b61b2b9ee91200d4c2366b96ff49f0b0154b1e Mon Sep 17 00:00:00 2001
From: Sam Macbeth <sam@cliqz.com>
Date: Fri, 18 Sep 2020 16:28:50 +0200
Subject: Remove mozilla build variants

---
 app/build.gradle | 75 ++----------------------------------------------
 bootstrap.sh     |  8 ------
 2 files changed, 2 insertions(+), 81 deletions(-)
 delete mode 100755 bootstrap.sh

diff --git a/app/build.gradle b/app/build.gradle
index 99a161ace..a23d2b458 100644
--- a/app/build.gradle
+++ b/app/build.gradle
@@ -75,65 +75,6 @@ android {
             resValue "bool", "IS_DEBUG", "true"
             pseudoLocalesEnabled true
         }
-        nightly releaseTemplate >> {
-            applicationIdSuffix ".fenix"
-            buildConfigField "boolean", "USE_RELEASE_VERSIONING", "true"
-            buildConfigField "String", "AMO_COLLECTION", "\"83a9cccfe6e24a34bd7b155ff9ee32\""
-            def deepLinkSchemeValue = "fenix-nightly"
-            buildConfigField "String", "DEEP_LINK_SCHEME", "\"$deepLinkSchemeValue\""
-            manifestPlaceholders = ["deepLinkScheme": deepLinkSchemeValue]
-        }
-        beta releaseTemplate >> {
-            buildConfigField "boolean", "USE_RELEASE_VERSIONING", "true"
-            applicationIdSuffix ".firefox_beta"
-            def deepLinkSchemeValue = "fenix-beta"
-            buildConfigField "String", "DEEP_LINK_SCHEME", "\"$deepLinkSchemeValue\""
-            manifestPlaceholders = [
-                    // This release type is meant to replace Firefox (Beta channel) and therefore needs to inherit
-                    // its sharedUserId for all eternity. See:
-                    // https://searchfox.org/mozilla-central/search?q=moz_android_shared_id&case=false&regexp=false&path=
-                    // Shipping an app update without sharedUserId can have
-                    // fatal consequences. For example see:
-                    //  - https://issuetracker.google.com/issues/36924841
-                    //  - https://issuetracker.google.com/issues/36905922
-                    "sharedUserId": "org.mozilla.firefox.sharedID",
-                    "deepLinkScheme": deepLinkSchemeValue
-            ]
-        }
-        release releaseTemplate >> {
-            buildConfigField "boolean", "USE_RELEASE_VERSIONING", "true"
-            applicationIdSuffix ".firefox"
-            def deepLinkSchemeValue = "fenix"
-            buildConfigField "String", "DEEP_LINK_SCHEME", "\"$deepLinkSchemeValue\""
-            manifestPlaceholders = [
-                    // This release type is meant to replace Firefox (Release channel) and therefore needs to inherit
-                    // its sharedUserId for all eternity. See:
-                    // https://searchfox.org/mozilla-central/search?q=moz_android_shared_id&case=false&regexp=false&path=
-                    // Shipping an app update without sharedUserId can have
-                    // fatal consequences. For example see:
-                    //  - https://issuetracker.google.com/issues/36924841
-                    //  - https://issuetracker.google.com/issues/36905922
-                    "sharedUserId": "org.mozilla.firefox.sharedID",
-                    "deepLinkScheme": deepLinkSchemeValue
-            ]
-        }
-        fennecNightly releaseTemplate >> {
-            buildConfigField "boolean", "USE_RELEASE_VERSIONING", "true"
-            applicationIdSuffix ".fennec_aurora"
-            def deepLinkSchemeValue = "fenix-nightly"
-            buildConfigField "String", "DEEP_LINK_SCHEME", "\"$deepLinkSchemeValue\""
-            manifestPlaceholders = [
-                    // This release type is meant to replace Firefox (Release channel) and therefore needs to inherit
-                    // its sharedUserId for all eternity. See:
-                    // https://searchfox.org/mozilla-central/search?q=moz_android_shared_id&case=false&regexp=false&path=
-                    // Shipping an app update without sharedUserId can have
-                    // fatal consequences. For example see:
-                    //  - https://issuetracker.google.com/issues/36924841
-                    //  - https://issuetracker.google.com/issues/36905922
-                    "sharedUserId": "org.mozilla.fennec.sharedID",
-                    "deepLinkScheme": deepLinkSchemeValue
-            ]
-        }
         ghostery releaseTemplate >> {
             buildConfigField "boolean", "USE_RELEASE_VERSIONING", "true"
             applicationIdSuffix ".ghostery"
@@ -182,19 +123,8 @@ android {
         debug {
             java.srcDirs = ['src/geckoNightly/java']
         }
-        nightly {
-            java.srcDirs = ['src/geckoNightly/java']
-        }
-        beta {
-            java.srcDirs = ['src/migration/java', 'src/geckoBeta/java']
-            manifest.srcFile "src/migration/AndroidManifest.xml"
-        }
-        release {
-            java.srcDirs = ['src/migration/java', 'src/geckoRelease/java']
-            manifest.srcFile "src/migration/AndroidManifest.xml"
-        }
         ghostery {
-            java.srcDirs = ['src/migration/java']
+            java.srcDirs = ['src/migration/java', 'src/geckoRelease/java']
             manifest.srcFile "src/migration/AndroidManifest.xml"
         }
     }
@@ -372,8 +302,7 @@ apply plugin: "org.mozilla.telemetry.glean-gradle-plugin"
 dependencies {
     debugImplementation Deps.mozilla_browser_engine_gecko_nightly
 
-    nightlyImplementation Deps.mozilla_browser_engine_gecko_nightly
-    betaImplementation Deps.mozilla_browser_engine_gecko_beta
+//    betaImplementation Deps.mozilla_browser_engine_gecko_beta
     releaseImplementation Deps.mozilla_browser_engine_gecko_release
 
     implementation Deps.kotlin_stdlib
diff --git a/bootstrap.sh b/bootstrap.sh
deleted file mode 100755
index f967dc344..000000000
--- a/bootstrap.sh
+++ /dev/null
@@ -1,8 +0,0 @@
-#!/bin/bash
-TAG="v8.5.2-4"
-EXT_DIR="app/src/main/assets/extensions/ghostery"
-DOWNLOAD_URL="https://cdncliqz.s3.amazonaws.com/update/fostery/ghostery-firefox-$TAG.zip"
-mkdir -p "$EXT_DIR"
-curl -L -o ghostery.zip "$DOWNLOAD_URL"
-unzip ghostery.zip -d "$EXT_DIR"
-rm ghostery.zip
-- 
2.25.1

