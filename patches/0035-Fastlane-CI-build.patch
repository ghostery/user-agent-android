From 28b338a07a99a1f9d2fd880680bad609bcfbc3fb Mon Sep 17 00:00:00 2001
From: Sam Macbeth <sam@cliqz.com>
Date: Tue, 4 Aug 2020 17:08:25 +0200
Subject: [PATCH] Fastlane CI build

---
 Gemfile          |  3 ---
 app/build.gradle | 10 ++++++++++
 2 files changed, 10 insertions(+), 3 deletions(-)
 delete mode 100644 Gemfile

diff --git a/Gemfile b/Gemfile
deleted file mode 100644
index 7a118b49b..000000000
--- a/Gemfile
+++ /dev/null
@@ -1,3 +0,0 @@
-source "https://rubygems.org"
-
-gem "fastlane"
diff --git a/app/build.gradle b/app/build.gradle
index 13af364ab..e0e767a0c 100644
--- a/app/build.gradle
+++ b/app/build.gradle
@@ -77,6 +77,15 @@ android {
         }
     }
 
+    signingConfigs {
+        ghostery {
+            storeFile System.getenv("CERT_PATH") ? file(System.getenv("CERT_PATH")) : null
+            storePassword System.getenv("CERT_PASS")
+            keyAlias "evidon"
+            keyPassword System.getenv("CERT_PASS")
+        }
+    }
+
     def releaseTemplate = {
         // We allow disabling optimization by passing `-PdisableOptimization` to gradle. This is used
         // in automation for UI testing non-debug builds.
@@ -148,6 +157,7 @@ android {
             ]
         }
         ghostery releaseTemplate >> {
+            signingConfig signingConfigs.ghostery
             buildConfigField "boolean", "USE_RELEASE_VERSIONING", "true"
             applicationIdSuffix ".ghostery"
             def deepLinkSchemeValue = "ghostery"
-- 
2.34.1

