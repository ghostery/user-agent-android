From 73c5f992e03e7f1c82fbfd83100df8159dae0692 Mon Sep 17 00:00:00 2001
From: Stefano Pacifici <stefano.pacifici@gmail.com>
Date: Wed, 10 Jun 2020 15:09:45 +0200
Subject: Disabling Mozilla Tracking protection

---
 app/src/main/java/org/mozilla/fenix/components/Core.kt |  2 +-
 .../org/mozilla/fenix/settings/SettingsFragment.kt     | 10 ----------
 app/src/main/res/xml/preferences.xml                   |  5 -----
 3 files changed, 1 insertion(+), 16 deletions(-)

diff --git a/app/src/main/java/org/mozilla/fenix/components/Core.kt b/app/src/main/java/org/mozilla/fenix/components/Core.kt
index 65319e3da..783d33aac 100644
--- a/app/src/main/java/org/mozilla/fenix/components/Core.kt
+++ b/app/src/main/java/org/mozilla/fenix/components/Core.kt
@@ -111,7 +111,7 @@ class Core(
             remoteDebuggingEnabled = context.settings().isRemoteDebuggingEnabled &&
                 Build.VERSION.SDK_INT >= Build.VERSION_CODES.M,
             testingModeEnabled = false,
-            trackingProtectionPolicy = trackingProtectionPolicyFactory.createTrackingProtectionPolicy(),
+            trackingProtectionPolicy = null,
             historyTrackingDelegate = HistoryDelegate(lazyHistoryStorage),
             preferredColorScheme = getPreferredColorScheme(),
             automaticFontSizeAdjustment = context.settings().shouldUseAutoSize,
diff --git a/app/src/main/java/org/mozilla/fenix/settings/SettingsFragment.kt b/app/src/main/java/org/mozilla/fenix/settings/SettingsFragment.kt
index b1df94e88..a3cd95c1c 100644
--- a/app/src/main/java/org/mozilla/fenix/settings/SettingsFragment.kt
+++ b/app/src/main/java/org/mozilla/fenix/settings/SettingsFragment.kt
@@ -194,14 +194,6 @@ class SettingsFragment : PreferenceFragmentCompat() {
     private fun update(shouldUpdateAccountUIState: Boolean) {
         val settings = requireContext().settings()

-        val trackingProtectionPreference =
-            requirePreference<Preference>(R.string.pref_key_tracking_protection_settings)
-        trackingProtectionPreference.summary = if (settings.shouldUseTrackingProtection) {
-            getString(R.string.tracking_protection_on)
-        } else {
-            getString(R.string.tracking_protection_off)
-        }
-
         val aboutPreference = requirePreference<Preference>(R.string.pref_key_about)
         val appName = getString(R.string.app_name)
         aboutPreference.title = getString(R.string.preferences_about, appName)
diff --git a/app/src/main/res/xml/preferences.xml b/app/src/main/res/xml/preferences.xml
index 9308df8be..86e99ce13 100644
--- a/app/src/main/res/xml/preferences.xml
+++ b/app/src/main/res/xml/preferences.xml
@@ -110,11 +110,6 @@
             app:iconSpaceReserved="false"
             android:title="@string/preferences_https_only_title" />

-        <androidx.preference.Preference
-            android:key="@string/pref_key_tracking_protection_settings"
-            app:iconSpaceReserved="false"
-            android:title="@string/preference_enhanced_tracking_protection" />
-
         <androidx.preference.Preference
             android:key="@string/pref_key_site_permissions"
             app:iconSpaceReserved="false"
--
2.35.1

