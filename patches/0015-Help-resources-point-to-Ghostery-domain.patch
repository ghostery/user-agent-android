From 4c22a51c3fa4019ed26959f7125a74a9f1d33748 Mon Sep 17 00:00:00 2001
From: Sam Macbeth <sam@cliqz.com>
Date: Mon, 3 Aug 2020 18:24:11 +0200
Subject: Help resources point to Ghostery domain

---
 .../mozilla/fenix/settings/SupportUtils.kt    | 21 ++++++++++---------
 .../fenix/settings/about/AboutFragment.kt     | 17 +--------------
 app/src/main/res/layout/fragment_about.xml    | 17 +--------------
 3 files changed, 13 insertions(+), 42 deletions(-)

diff --git a/app/src/main/java/org/mozilla/fenix/settings/SupportUtils.kt b/app/src/main/java/org/mozilla/fenix/settings/SupportUtils.kt
index 4100ff835..38602d049 100644
--- a/app/src/main/java/org/mozilla/fenix/settings/SupportUtils.kt
+++ b/app/src/main/java/org/mozilla/fenix/settings/SupportUtils.kt
@@ -58,24 +58,25 @@ object SupportUtils {
     }

     enum class MozillaPage(internal val path: String) {
-        PRIVATE_NOTICE("privacy/firefox/"),
-        MANIFESTO("about/manifesto/")
+        PRIVATE_NOTICE("privacy/privacy/"),
+        MANIFESTO("ghostery-manifesto/")
     }

     /**
      * Gets a support page URL for the corresponding topic.
      */
+    @Suppress("UNUSED_PARAMETER")
     fun getSumoURLForTopic(
         context: Context,
         topic: SumoTopic,
         locale: Locale = Locale.getDefault()
     ): String {
-        val escapedTopic = getEncodedTopicUTF8(topic.topicStr)
-        // Remove the whitespace so a search is not triggered:
-        val appVersion = context.appVersionName?.replace(" ", "")
-        val osTarget = "Android"
-        val langTag = getLanguageTag(locale)
-        return "https://support.mozilla.org/1/mobile/$appVersion/$osTarget/$langTag/$escapedTopic"
+        return when (topic) {
+            SumoTopic.HELP -> "https://www.ghostery.com/support/"
+            // "What's new" is used also in the "About Ghostery" preferences entry
+            SumoTopic.WHATS_NEW -> "https://github.com/ghostery/user-agent-android/releases"
+            else -> "This topic is unsupported"
+        }
     }

     /**
@@ -92,10 +93,10 @@ object SupportUtils {
         return "https://support.mozilla.org/kb/access-mozilla-services-firefox-account"
     }

+    @Suppress("UNUSED_PARAMETER")
     fun getMozillaPageUrl(page: MozillaPage, locale: Locale = Locale.getDefault()): String {
         val path = page.path
-        val langTag = getLanguageTag(locale)
-        return "https://www.mozilla.org/$langTag/$path"
+        return "https://www.ghostery.com/$path"
     }

     fun getWhatsNewUrl(context: Context) = getSumoURLForTopic(context, SumoTopic.WHATS_NEW)
diff --git a/app/src/main/java/org/mozilla/fenix/settings/about/AboutFragment.kt b/app/src/main/java/org/mozilla/fenix/settings/about/AboutFragment.kt
index e3799b3cc..3097fd718 100644
--- a/app/src/main/java/org/mozilla/fenix/settings/about/AboutFragment.kt
+++ b/app/src/main/java/org/mozilla/fenix/settings/about/AboutFragment.kt
@@ -124,11 +124,9 @@ class AboutFragment : Fragment(), AboutPageListener {
             ""
         }

-        val content = getString(R.string.about_content, appName)
         val buildDate = BuildConfig.BUILD_DATE

         binding.aboutText.text = aboutText
-        binding.aboutContent.text = content
         binding.buildDate.text = buildDate
     }

@@ -140,13 +138,7 @@ class AboutFragment : Fragment(), AboutPageListener {
         val context = requireContext()

         return listOf(
-            AboutPageItem(
-                AboutItem.ExternalLink(
-                    WHATS_NEW,
-                    SupportUtils.getWhatsNewUrl(context)
-                ),
-                getString(R.string.about_whats_new, getString(R.string.app_name))
-            ),
+
             AboutPageItem(
                 AboutItem.ExternalLink(
                     SUPPORT,
@@ -165,13 +157,6 @@ class AboutFragment : Fragment(), AboutPageListener {
                 ),
                 getString(R.string.about_privacy_notice)
             ),
-            AboutPageItem(
-                AboutItem.ExternalLink(
-                    RIGHTS,
-                    SupportUtils.getSumoURLForTopic(context, SupportUtils.SumoTopic.YOUR_RIGHTS)
-                ),
-                getString(R.string.about_know_your_rights)
-            ),
             AboutPageItem(
                 AboutItem.ExternalLink(LICENSING_INFO, ABOUT_LICENSE_URL),
                 getString(R.string.about_licensing_information)
diff --git a/app/src/main/res/layout/fragment_about.xml b/app/src/main/res/layout/fragment_about.xml
index 7e9b03ff0..d266d4f8a 100644
--- a/app/src/main/res/layout/fragment_about.xml
+++ b/app/src/main/res/layout/fragment_about.xml
@@ -33,21 +33,6 @@
             app:layout_constraintTop_toTopOf="parent"
             app:layout_constraintWidth_percent="0.75" />

-        <TextView
-            android:id="@+id/about_content"
-            style="@style/Header16TextStyle"
-            android:layout_width="wrap_content"
-            android:layout_height="wrap_content"
-            android:layout_marginTop="@dimen/about_header_title_margin_top"
-            android:paddingStart="@dimen/about_header_title_padding_start_end"
-            android:paddingEnd="@dimen/about_header_title_padding_start_end"
-            android:textAlignment="center"
-            app:layout_constraintEnd_toEndOf="parent"
-            app:layout_constraintStart_toStartOf="parent"
-            app:layout_constraintTop_toBottomOf="@id/wordmark"
-            app:layout_constraintWidth_percent="0.8"
-            tools:text="@string/about_content" />
-
         <TextView
             android:id="@+id/about_text"
             style="@style/AboutHeaderContentText"
@@ -58,7 +43,7 @@
             android:textIsSelectable="true"
             app:layout_constraintEnd_toEndOf="parent"
             app:layout_constraintStart_toStartOf="parent"
-            app:layout_constraintTop_toBottomOf="@id/about_content"
+            app:layout_constraintTop_toBottomOf="@id/wordmark"
             app:layout_constraintWidth_percent="0.8"
             tools:text="1.0.x (Build #x), 0d7383fd2\nAC: 1.0.0, 96ae23b628\nGV: 69.x-x\nAS: 1.0.0" />

--
2.35.1

